# OpenRisk 프로젝트 발표 자료

> 서울시 빅데이터 기반 상권 리스크 분석 서비스

---

## 1. 프로젝트 개요

### 서비스 소개
- **이름**: OpenRisk (오픈리스크)
- **목적**: 초보 창업자를 위한 상권 리스크 분석 서비스
- **핵심 가치**: "상권의 진실을 마주하세요" - 창업 전 객관적 데이터 기반 의사결정 지원

### 해결하고자 하는 문제
- 창업 실패율 높음 (특히 자영업)
- 상권 분석 서비스 대부분 유료 또는 전문가 필요
- 데이터 기반이 아닌 감에 의존한 창업 결정

---

## 2. 기술 스택

| 영역 | 기술 |
|------|------|
| Frontend | Next.js 16, React 19, TypeScript |
| Styling | Tailwind CSS, CSS Variables |
| Database | Supabase (PostgreSQL + PostGIS) |
| Map | Kakao Maps SDK |
| AI | Groq API (Llama 3.3 70B) |
| Deployment | Vercel (예정) |

### 선택 이유
- **Next.js 16**: App Router, 서버 컴포넌트, 빠른 빌드
- **Supabase**: PostGIS 지원으로 지리 데이터 처리 용이
- **Groq**: 무료 티어로 빠른 LLM 추론 (Llama 3.3 70B)

---

## 3. 핵심 기능

### 3.1 상권 검색 및 분석
- 지역명/주소 입력 → 자동완성 → 상권 매칭
- 카카오 API로 좌표 변환 → PostGIS로 폴리곤 내 포함 여부 판단

### 3.2 등급 시스템 (A/B/C/D)

| 등급 | 유형 | 특징 | 리스크 |
|------|------|------|--------|
| A | 주거안정형 | 거주 인구 기반, 단골 중심 | 낮음 |
| B | 혼합균형형 | 주거+상업 혼합, 시간대별 변동 | 중간 |
| C | 상업활성형 | 유동인구 높음, 외부 유입 의존 | 높음 |
| D | 특수상권형 | 대학가/관광지 등 특수 패턴 | 분석 필요 |

### 3.3 분석 지표

**기본 지표**
- `traffic_index`: 유동인구 지수
- `daypart_variance`: 시간대별 분산
- `weekend_ratio`: 주말 비율

**확장 지표 (Phase 2)**
- `resident_index`: 거주인구 지수
- `worker_index`: 직장인구 지수
- `competition_density`: 경쟁 밀도
- `open_close_churn`: 개폐업 회전율
- `cost_proxy`: 비용 프록시 (임대료 추정)

### 3.4 AI 요약 기능
- Groq Llama 3.3 70B 모델 사용
- 구조화된 프롬프트로 일관된 JSON 출력
- 핵심 해석, 리스크 체크, 현장 확인 사항 제공

---

## 4. 시스템 아키텍처

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Client    │────▶│  Next.js    │────▶│  Supabase   │
│  (Browser)  │     │  API Routes │     │ (PostgreSQL)│
└─────────────┘     └─────────────┘     └─────────────┘
                           │
                    ┌──────┴──────┐
                    ▼             ▼
              ┌──────────┐  ┌──────────┐
              │ Kakao API│  │ Groq API │
              │ (지도/좌표)│  │ (AI 요약) │
              └──────────┘  └──────────┘
```

### API 엔드포인트
- `GET /api/search?q=검색어` - 상권 자동완성
- `GET /api/analyze?query=검색어` - 상권 분석
- `POST /api/ai/summary` - AI 요약 생성

---

## 5. 데이터 구조

### Supabase 테이블: `trade_areas`

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | text | 상권 코드 |
| name | text | 상권명 |
| district | text | 자치구 |
| center | geometry(Point) | 중심점 좌표 |
| polygon | geometry(Polygon) | 상권 영역 |
| period | text | 데이터 기준 분기 |
| traffic_total | integer | 총 유동인구 |
| traffic_weekday | integer | 평일 유동인구 |
| traffic_weekend | integer | 주말 유동인구 |
| resident_index | float | 거주인구 지수 |
| worker_index | float | 직장인구 지수 |
| ... | | |

### 데이터 출처
- 서울시 상권분석서비스 (공공데이터)
- 서울 열린데이터 광장

---

## 6. 등급 계산 로직

### 6.1 정규화
각 지표를 0~1 범위로 정규화 (Min-Max 또는 백분위)

### 6.2 가중 합산
```javascript
score = w1*traffic + w2*daypart + w3*weekend + w4*resident + ...
```

### 6.3 등급 분류
- A: score < 0.3 (안정형)
- B: 0.3 ≤ score < 0.5 (혼합형)
- C: 0.5 ≤ score < 0.7 (상업형)
- D: score ≥ 0.7 또는 특수 조건 (특수형)

---

## 7. AI 프롬프트 설계

### 핵심 원칙
1. **단정 금지**: "~으로 판단됨" 대신 "~가능성이 있음"
2. **근거 기반**: 입력 데이터에 있는 값만 언급
3. **계산 허용**: 같은 레코드 내 비율/배수 계산 가능
4. **필드 분리**: structureAnalysis vs marketingNote 역할 구분

### 출력 구조
```json
{
  "oneLiner": "핵심 요약 1문장",
  "structureAnalysis": "상권 구조 해석 2~3문장",
  "keyMetrics": [...],
  "riskChecks": ["리스크1", "리스크2"],
  "nextSteps": ["확인사항1", "확인사항2", "확인사항3"],
  "marketingNote": null | "마케팅 가설",
  "finalSummary": "결론 카드 2~3문장",
  "disclaimer": "면책 조항"
}
```

---

## 8. UI/UX 특징

### 디자인 시스템
- 다크 테마 기반 (#09090b)
- 등급별 색상 코드 (A=에메랄드, B=앰버, C=레드, D=바이올렛)
- Pretendard 폰트 (가독성)

### 반응형
- 모바일/태블릿/데스크톱 대응
- 검색바, 카드, 지도 모두 반응형

### 인터랙션
- 검색 자동완성 (디바운스 300ms)
- 지도 폴리곤 시각화
- AI 요약 모달 (로딩 상태 포함)
- 툴팁 시스템 (정보 아이콘)

---

## 9. 개발 일정 및 진행 상황

### 완료 (Phase 1-2)
- [x] 기본 검색 및 분석 기능
- [x] 등급 계산 엔진
- [x] 카카오맵 연동 (폴리곤 시각화)
- [x] 검색 자동완성
- [x] 모바일 반응형
- [x] 로딩 스켈레톤 UI
- [x] AI 요약 기능 (Groq Llama 3.3 70B)

### 예정 (Phase 3-4)
- [ ] 업종별 상세 분석 (lv4)
- [ ] 상권 비교 기능
- [ ] PDF 다운로드
- [ ] 결과 공유
- [ ] 사용자 인증
- [ ] 분석 이력 저장

---

## 10. 차별점

| 기존 서비스 | OpenRisk |
|------------|----------|
| 유료 또는 전문가 필요 | 무료 + 직관적 UI |
| 단순 데이터 나열 | 등급화 + AI 해석 |
| 추천/확신 표현 | 가능성/조건부 표현 |
| 복잡한 대시보드 | 핵심만 집중 |

---

## 11. 데모 시나리오

1. **메인 페이지 진입**
   - 타이틀, 검색바, 등급 카드 확인

2. **검색 (예: "강남역")**
   - 자동완성 드롭다운
   - 결과 선택 또는 엔터

3. **결과 페이지**
   - 등급 배지 (C등급 상업활성형)
   - 지도에서 폴리곤 확인
   - 유동인구 카드
   - 인구 구성 (거주 vs 직장)
   - 분석 지표 프로그레스 바
   - 핵심 해석, 확인 사항, 리스크

4. **AI 요약**
   - "AI 요약" 버튼 클릭
   - 로딩 후 모달에서 상세 분석 확인

---

## 12. 향후 계획

### 단기
- Vercel 배포
- 메타 태그 최적화 (SEO)
- 에러 트래킹 (Sentry)

### 중기
- 업종별 분석 추가
- 비교 분석 기능
- PDF 리포트 다운로드

### 장기
- 사용자 계정 시스템
- 분석 이력 저장
- 상권 변화 알림 (정기 모니터링)

---

## 13. 참고 자료

### 문서
- `docs/등급계산로직.md` - 등급 산정 상세 로직
- `docs/데이터명세서.md` - 데이터 구조 명세
- `docs/AI프롬프트명세서.md` - AI 프롬프트 구조
- `docs/개발일지.md` - 개발 진행 기록

### 기술 스택 문서
- [Next.js 16 문서](https://nextjs.org/docs)
- [Supabase 문서](https://supabase.com/docs)
- [Kakao Maps API](https://apis.map.kakao.com/)
- [Groq API](https://console.groq.com/docs)

---

## Q&A

감사합니다!
